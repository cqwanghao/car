<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta content="telephone=no" name="format-detection" />
	<title>人保</title>
    <link rel="stylesheet" type="text/css" href="http://static.vipgogo.com/picc/carLogo/css/home.css">

</head>
<body>
    <div class="page">
        <div id="lanren">
            <div id="audio-btn" class="on" onclick="lanren.changeClass(this,'media')">
                <audio loop="loop" src="http://static.vipgogo.com/picc/carLogo/music/bgmusic.mp3" id="media" preload="preload"></audio>
            </div>
        </div>
        <!-- loading加载 -->
    	<div class="loading">
            <div class="loading_box">
                <img src="http://static.vipgogo.com/picc/carLogo/img/loading_bg.png" class="loading_bg">
                <img src="http://static.vipgogo.com/picc/carLogo/img/loading1.png" class="loading_process loading1">
                <img src="http://static.vipgogo.com/picc/carLogo/img/loading2.png" class="loading_process loading2">
            </div>  
        </div>
        <!-- 首页 -->
        <div class="container">
            <!-- 主页 -->
            <div class="main">
                <!-- logo -->
                <div class="logo">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/logo.png">
                </div>
                <!-- 大图 -->
                <div class="picc">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/picc_car.png">
                </div>
                <!-- 按钮组 -->
                <div class="group">
                    <button class="btn1">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/btn1.png">
                    </button>
                    <button class="btn2">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/btn2-2.png" class="btn_bg">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/word8.png" class="word">
                    </button>
                    <button class="btn3">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/btn3.png">
                    </button>
                </div>
            </div>
            
            <!-- 规则 -->
            <div class="cover cover1">
                <!-- 标题 -->
                <div class="title">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/head_bg.png" class="title_bg">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/word1.png" class="word">
                </div>
                <!-- 活动规则 -->
                <div class="show">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/show_bg.png" class="show_bg">
                    <div class="word_box">
                        <div class="slide_box">
                            <p>1、在重庆人保财险投保且已注册为会员的用户才有领奖资格（未注册客户请尽快前往“享服务-会员专区”进行注册）；</p>
                            <p>2、活动时间：2016年12月 14日至12月 18日（共计5天）；</p>
                            <p>3、每道关卡设置15秒竞猜时间；</p>
                            <p>4、一题为一关卡，答对一题即可进入下一关卡，若未答对或答题时间截止前未作选择，则结束竞猜，进入第三道关卡皆可获得刮奖资格；</p>
                            <p>5、活动期间每个用户最多可领取一次奖品；</p>
                            <p>6、奖项设置：100元加油卡、500M流量、100M流量；</p>
                            <p>7、赠送流量为三网通流量，客户中奖后填写手机号码完成充值，如客户手机号不能成功充值（非本地号码、非实名制号码、特殊套餐等不能成功充值），可指定其他手机号进行充值；</p>
                            <p>8、油卡为中石油加油卡，活动结束后3个工作人日内，由重庆人保工作人员与获奖客户联系兑换；</p>
                            <p>9、如您中奖，请及时填写您的领奖信息（非重庆人保客户领奖信息视为无效），最后填写时间为活动结束后第三个工作日，超时未完成者，视为自动放弃；</p>
                            <p>10、我们将在活动结束后10个工作日内公布中奖名单并告知领取流程，请注意查看95518发送短信或者重庆人保财险公众号领取流程图文；</p>
                            <p>11、禁止作弊，本活动将动用人工+检测程序+举报机制监督，一旦发现将取消获奖资格。活动期间将进行详细数据核查检测剔除非正常数据（参加活动即默认认同此规则）；</p>
                            <p>12、本活动最终解释权归重庆人保财险所有。</p>
                        </div>
                    </div>
                </div>
                <!-- 按钮 -->
                <button class="btn">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/btn4.png">
                </button>
            </div>
            <!-- 获奖榜单 -->
            <div class="cover cover2">
                <!-- 标题 -->
                <div class="title">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/head_bg.png" class="title_bg">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/word2.png" class="word">
                    <p class="title_word">（一小时更新一次）</p>
                </div>
                <!-- 活动规则 -->
                <div class="show">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/show_bg.png" class="show_bg">
                    <div class="word_box">
                        <div class="slide_box">
                            <dl>
                                <dt>
                                    <span>昵称</span>
                                    <i>奖品</i>
                                </dt>
                                <dd><span>时间机器猫</span><i>100元油卡</i></dd>
                                <dd><span>网络浪子</span><i>100元油卡</i></dd>
                                <dd><span>加菲猫</span><i>100元油卡</i></dd>
                                <dd><span>忠犬</span><i>500G流量</i></dd>
                                <dd><span>科菲</span><i>500G流量</i></dd>
                                <dd><span>普朗特</span><i>500G流量</i></dd>
                                <dd><span>铁夫人</span><i>500G流量</i></dd>
                                <dd><span>时间机器猫时间机器猫时间机器猫</span><i>100元油卡100元油卡</i></dd>
                                <dd><span>网络浪子</span><i>100元油卡</i></dd>
                                <dd><span>加菲猫</span><i>100元油卡</i></dd>
                                <dd><span>忠犬</span><i>500G流量</i></dd>
                                <dd><span>科菲</span><i>500G流量</i></dd>
                                <dd><span>普朗特</span><i>500G流量</i></dd>
                                <dd><span>铁夫人</span><i>500G流量</i></dd>
                                <dd><span>时间机器猫</span><i>100元油卡</i></dd>
                                <dd><span>网络浪子</span><i>100元油卡</i></dd>
                                <dd><span>加菲猫</span><i>100元油卡</i></dd>
                                <dd><span>忠犬</span><i>500G流量</i></dd>
                                <dd><span>科菲</span><i>500G流量</i></dd>
                                <dd><span>普朗特</span><i>500G流量</i></dd>
                                <dd><span>铁夫人</span><i>500G流量</i></dd>
                            </dl>
                        </div>
                    </div>
                </div>
                <!-- 按钮 -->
                <button class="btn">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/btn4.png">
                </button>
            </div>
            <!-- 答题 -->
            <div class="cover cover3">
                <!-- 标题 -->
                <div class="title">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/head_bg.png" class="title_bg">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/word3.png" class="word">
                </div>
                <!-- 外观 -->
                <div class="exterior">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/exterior_bg.png" class="exterior_bg">
                    <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/car_out/car_out1.png" class="car_out"> -->
                    <img src="" class="car_out">
                </div>
                <!-- 内饰 -->
                <div class="interior">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/interior_bg.png" class="interior_bg">
                    <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/car_in/car_in1.png" class="car_in"> -->
                    <img src="" class="car_in">
                </div>
                <!-- 按钮组 -->
                <div class="group_btn">
                    <button class="btn1">
                        <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/choice/choice1-1.png"> -->
                        <img src="">
                    </button>
                    <button class="btn2">
                        <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/choice/choice1-2.png"> -->
                        <img src="">
                    </button>
                    <button class="btn3">
                        <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/choice/choice1-3.png"> -->
                        <img src="">
                    </button>
                    <button class="btn4">
                        <!-- <img src="http://static.vipgogo.com/picc/carLogo/images/choice/choice1-4.png"> -->
                        <img src="">
                    </button>
                </div>
                <!-- 进度条 -->
                <div class="progress_box">
                    <div class="left">LV：<span id="quantity">0</span>/5</div>
                    <div class="right fr"><span id="second">15.0</span>S</div>
                    <div class="progress">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/progress_bg.png" class="progress_bg">
                        <img src="http://static.vipgogo.com/picc/carLogo/img/progress0.png" class="percent">
                    </div>
                </div>
            </div>
            <!-- 失败提示 -->
            <div class="cover cover4">
                <div class="tip">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/tip_bg.png" class="tip_bg">
                    <div class="message">
                        <i>进入<b>第二道关卡</b>即可参加人保百元油卡刮刮乐，再接再厉</i>
                    </div>
                </div>
                <!-- 按钮 -->
                <button class="btn">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/btn4.png">
                </button>
            </div>
            <!-- 程序有错提示 -->
            <div class="cover cover5">
                <div class="tip">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/tip_bg.png" class="tip_bg">
                    <!-- <div class="message">程序出现BUG!</div> -->
                    <div class="message"></div>
                </div>
                <!-- 按钮 -->
                <button class="btn">
                    <img src="http://static.vipgogo.com/picc/carLogo/img/btn4.png">
                </button>
            </div>
        </div>
    </div>
    
	<script type="text/javascript" src="http://static.vipgogo.com/picc/carLogo/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://static.vipgogo.com/picc/carLogo/json/answer.js"></script>
    <!-- <script type="text/javascript" src="http://static.vipgogo.com/picc/carLogo/js/subject.js"></script> -->
    <script type="text/javascript">
        // 音乐播放
        var lanren = {
            changeClass: function (target,id) {
                var className = $(target).attr('class');
                var ids = document.getElementById(id);
                (className == 'on')
                    ? $(target).removeClass('on').addClass('off')
                    : $(target).removeClass('off').addClass('on');
                (className == 'on')
                    ? ids.pause()
                    : ids.play();
            },
            play:function(){
                document.getElementById('media').play();
            }
        }
        lanren.play();

        $(function(){
            //图片加载
            function imgLoad(arr,callBack){
                var len = arr.length;//所有图片的个数
                var imgs = {};//创建一个空的JSON,去存我们的所有图片
                var loaded = 0;//记录我们加载了多少张图片

                for(var i = 0; i < len; i ++){
                    var img = new Image();
                    img.onload = function(){
                        loaded ++ ;//增加了一张图片
                        //已经加载了一张图片
                        if(loaded == 2){
                            setTimeout(function(){
                                $(".loading1").show();
                            },1000);
                        }
                        //加载完成
                        if(loaded == len){
                            setTimeout(function(){
                                $(".loading2").show();
                            },2000);
                            //loading加载完毕
                            setTimeout(function(){
                                $(".loading").hide();
                                $(".container").show();
                            },2500);
                        }
                    }
                    img.src = arr[i];
                    var name1 = arr[i].split("/");
                    var name2 = name1[name1.length-1]; 
                    var name = name2.split(".")[0];
                    imgs[name] = arr[i];
                    // console.log(imgs);
                }
            }

            //存放预加载图片数组
            var arr = ["http://static.vipgogo.com/picc/carLogo/img/bg1.jpg",
                        "http://static.vipgogo.com/picc/carLogo/img/picc_car.png",
                        "http://static.vipgogo.com/picc/carLogo/img/show_bg.png"
                    ];

            //存放5个不同随机数的数组
            var arr2 = [];

            //产生5个不重复的随机数
            function my_ran(n,min,max){
              var arr1=[];
              for(var i=0;i<max-min+1;i++){
                arr1[i]=i+min;
              }
              for(var i=0;i<n;i++){
                var x=parseInt(Math.random()*arr1.length);
                arr2[i]=arr1[x];
                for(var j=x;j<arr1.length;j++){
                  arr1[j]=arr1[j+1];
                }
                arr1.length=arr1.length-1;
              }
              
            }

            my_ran(5,1,30);
            //打印5个随机数组
            // console.log(arr2);


            //答题图片预加载，添加进arr数组
            function imgInsert(){
                for(var i = 0;i < 5;i++){
                    var arrLength = arr.length;
                    arr[arrLength] = "http://static.vipgogo.com/picc/carLogo/images/car_out/car_out" + arr2[i] + ".png";
                    arr[arrLength + 1] = "http://static.vipgogo.com/picc/carLogo/images/car_in/car_in" + arr2[i] + ".png";
                    arr[arrLength + 2] = "http://static.vipgogo.com/picc/carLogo/images/choice/choice" + arr2[i] + "-1.png";
                    arr[arrLength + 3] = "http://static.vipgogo.com/picc/carLogo/images/choice/choice" + arr2[i] + "-2.png";
                    arr[arrLength + 4] = "http://static.vipgogo.com/picc/carLogo/images/choice/choice" + arr2[i] + "-3.png";
                    arr[arrLength + 5] = "http://static.vipgogo.com/picc/carLogo/images/choice/choice" + arr2[i] + "-4.png";
                }
            }
            imgInsert();

            //图片加载
            imgLoad(arr);

            
            //游戏规则
            $(".group .btn1").click(function(){
                $(".cover1").show();
            });
            $(".cover1 .btn").click(function(){
                $(".cover1").hide();
            });
            //中奖名单
            $(".group .btn3").click(function(){
                $(".cover2").show();
            });
            $(".cover2 .btn").click(function(){
                $(".cover2").hide();
            });


            //剩余机会
            var total = 2;
            var intervalid = null;
            //倒计时15秒开始
            var countdown = 15;
            function settime(){
                if (countdown <= -1) {
                    answer();
                    clearInterval(intervalid);
                    return false; 
                }else{ 
                    $("#second").html(countdown);
                    countdown--;
                } 
                intervalid = setTimeout(function() { 
                    settime();
                },1000); 
            }

            //获取的类名
            var objClass = "";
            //更换题目
            function subject(args){
                $(".cover3 img.car_out").attr("src","http://static.vipgogo.com/picc/carLogo/images/car_out/car_out" + args + ".png");
                $(".cover3 img.car_in").attr("src","http://static.vipgogo.com/picc/carLogo/images/car_in/car_in" + args + ".png");
                $(".cover3 .btn1 img").attr("src","http://static.vipgogo.com/picc/carLogo/images/choice/choice" + args + "-1.png");
                $(".cover3 .btn2 img").attr("src","http://static.vipgogo.com/picc/carLogo/images/choice/choice" + args + "-2.png");
                $(".cover3 .btn3 img").attr("src","http://static.vipgogo.com/picc/carLogo/images/choice/choice" + args + "-3.png");
                $(".cover3 .btn4 img").attr("src","http://static.vipgogo.com/picc/carLogo/images/choice/choice" + args + "-4.png");
                for(var i in carLogo){
                    if(i.indexOf("logo") > -1){
                        var num = parseInt(i.substring(4));
                        if(args == num){
                            objClass = carLogo[i][0].result;
                            console.log(objClass + ' ' + i);
                        }
                    }
                }
            }

            //开始进入答题
            $(".group .btn2").click(function(){
                $(".cover3").show();
                //答题开始计时
                countdown = 15;
                settime();
                subject(arr2[0]);
            });

            var subjectNum = 0;//题号

            //点击按钮答题
            $(".group_btn button").click(function(){
                //添加disabled属性
                $(".group_btn button").attr('disabled',"true");
                $(".cover3 ." + objClass + " img").attr("src","http://static.vipgogo.com/picc/carLogo/images/choice/choice" + arr2[subjectNum] + "-5.png");
                if($(this).hasClass(objClass)){
                    subjectNum++;
                    // console.log(subjectNum);
                    var num = parseInt($("#quantity").html());
                    num++;
                    if(num >=5){
                        num = 5;
                        setTimeout(function(){
                            window.location.href = "draw.html";
                        },1000);
                    }
                    $("#quantity").html(num);
                    //同步更新进度条
                    $(".cover3 .progress img.percent").attr("src","http://static.vipgogo.com/picc/carLogo/img/progress" + num + ".png");
                    //清除计时器
                    clearInterval(intervalid);
                    //重置秒数
                    countdown = 15;
                    settime();
                    //更新题库
                    setTimeout(function(){
                        subject(arr2[subjectNum]);
                        //移除disabled属性
                        $(".group_btn button").removeAttr("disabled"); 
                    },1000);
                }else{
                    clearInterval(intervalid);
                    answer();
                }
            });
            
            //回到开始状态
            function startPage(){
                $(".container").hide();
                $(".cover3").hide();
                $(".loading").show();
                $(".loading1").hide();
                $(".loading2").hide();
                my_ran(5,1,30);
                arr = [];
                console.log(arr2);
                imgInsert();
                imgLoad(arr);
                //重置题号
                subjectNum = 0;
            }

            //答题失败
            function answer(){
                // subjectNum++;
                if(total>=1){
                    setTimeout(function(){
                        $(".cover4").show();
                        //移除disabled属性
                        $(".group_btn button").removeAttr("disabled");
                    },1000);
                    $(".cover4 .btn").click(function(){
                        $(".cover4").hide();
                        //更新题库
                        startPage();
                    });
                    total--;
                }
                else{
                    setTimeout(function(){
                        $(".cover5").show();
                        //移除disabled属性
                        $(".group_btn button").removeAttr("disabled");
                    },1000);
                    $(".cover5 .tip .message").html("次数已用完！");
                    $(".cover5 .btn").click(function(){
                        $(".cover5").hide();
                        //更新题库
                        startPage();
                    });
                }
                //重置答题数为0
                $("#quantity").html(0);
                //同步重置进度条为0
                $(".cover3 .progress img.percent").attr("src","http://static.vipgogo.com/picc/carLogo/img/progress0.png");
            }
            
            
        });
    </script>
</body>
</html>